Highâ€‘Level Explanation
Weâ€™re improving the â€œReserve & Payâ€ flow to give parents confidence their spot is held, without requiring them to manually confirm payment in the app. Instead of an â€œIâ€¯Haveâ€¯Paidâ€ button, weâ€™ll:

Reserve the Spot Immediately

On â€œReserve & Pay,â€ create the signup(s) with paid = false.

Lock the seat in the database as â€œpending payment.â€

Show a Confirmation Modal

Make clear the spot is reserved but payment is still required.

Display the Venmo deepâ€‘link or webâ€‘link to the Futsal Culture business profile.

Show the DMCâ€‘Futsal_Culture handle and precise â€œWhatâ€™s this forâ€ format:

css
Copy
Edit
[PlayerFirstName] [GU12 or BU10] [MM/DD]
Pending Confirmation UI

After reservation, sessions in the parent/player dashboard show a â€œPending Paymentâ€ badge.

Include helper copy:

â€œYour spot is held for 1â€¯hour. Please complete Venmo payment or the reservation will be cancelled.â€

Admin Payment Reminder Workflow

In the admin panel, list all â€œpending paymentâ€ signups.

Provide an â€œSend Payment Reminderâ€ button (SMS or email) that autoâ€‘sends a message:

â€œHi [ParentName], your spot for [PlayerName]â€™s GU12 session at 6â€¯PM is pending payment. Please pay via Venmo at DMCâ€‘Futsal_Culture or your spot may be released.â€

Cancellation of Expired Holds

A background job runs every 15â€¯minutes:

Finds pending signups older than 1â€¯hour

Deletes them, freeing up the spot

Optionally notifies the parent of cancellation

ğŸ”§ Detailed Instructions for Replit AI
Backend: Signup Creation

Route: POST /api/signups

Behavior:

Create one or more signups with paid = false and record createdAt.

Respond with signupIds and reservationExpiresAt = createdAt + 1â€¯hour.

Frontend: VenmoPrompt Modal

tsx
Copy
Edit
function VenmoPrompt({ signupIds, reservationExpiresAt }) {
  const isMobile = /android|iphone|ipad/i.test(navigator.userAgent);
  const venmoUrl = isMobile
    ? "venmo://u/DMC-Futsal_Culture"
    : "https://account.venmo.com/u/DMC-Futsal_Culture";

  return (
    <Modal>
      <h2 className="text-xl font-bold">Spot Reserved!</h2>
      <p>Your spot is held until <strong>{formatTime(reservationExpiresAt)}</strong>.</p>
      <p>
        Please complete payment via Venmo to secure your reservation.
      </p>

      <div className="bg-zinc-900 p-4 rounded border-zinc-700">
        <p><strong>Venmo Handle:</strong> DMCâ€‘Futsal_Culture</p>
        <p><strong>Note format:</strong></p>
        <pre className="bg-black/50 p-2 rounded">
          [PlayerFirstName] [GU12 or BU10] [MM/DD]
        </pre>
      </div>

      <a
        href={venmoUrl}
        className="mt-4 inline-block bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded"
      >
        Open Venmo
      </a>
    </Modal>
  );
}
Frontend: Pending Badge

In the parent/player dashboard, for each session where paid = false and createdAt is within the last hour, display:

tsx
Copy
Edit
<span className="inline-block bg-yellow-500 text-black px-2 py-1 rounded">
  Pending Payment
</span>
Admin Panel: Pending Payments List

New tab â€œPending Paymentsâ€ listing signup records with:

Parent name, Player name, Session title, createdAt

â€œSend Payment Reminderâ€ button

ts
Copy
Edit
app.post("/api/admin/send-reminder/:signupId", requireAuthAdmin, async (req, res) => {
  const signup = await db.signups.findUnique(...);
  const parent = await db.users.findUnique(...);
  // Send SMS or email template:
  // "Hi [ParentName], your reservation for [PlayerName]â€™s session is pending payment..."
  res.json({ success: true });
});
Background Job: Expire Holds

ts
Copy
Edit
setInterval(async () => {
  const cutoff = new Date(Date.now() - 60*60*1000);
  const expired = await db.signups.findMany({
    where: { paid: false, createdAt: { lt: cutoff } }
  });
  for (const s of expired) {
    await db.signups.delete({ where: { id: s.id } });
    // Optional: notify parent of cancellation
  }
}, 15*60*1000);